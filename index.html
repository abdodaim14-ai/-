<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة القراء العالمية | الاحترافية المطلقة 2026</title>

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;500;900&family=Amiri:wght@400;700&family=Reem+Kufi&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        /* =========================================
           نظام التصميم الإمبراطوري (UI System)
           ========================================= */
        :root {
            --gold-main: #ffcc33;
            --gold-soft: #ffeb3b;
            --gold-dark: #b8860b;
            --deep-space: #010409;
            --card-bg: rgba(13, 17, 23, 0.95);
            --border-color: rgba(255, 204, 51, 0.2);
            --text-glow: 0 0 15px rgba(255, 204, 51, 0.5);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }

        body {
            background: var(--deep-space);
            color: #fff;
            font-family: 'Cairo', sans-serif;
            overflow-x: hidden;
            background-attachment: fixed;
            background-image: 
                radial-gradient(circle at 50% 0%, #1e293b 0%, transparent 50%),
                url('https://www.transparenttextures.com/patterns/stardust.png');
        }

        /* أنيميشن الخلفية */
        #stars-canvas { position: fixed; top: 0; left: 0; z-index: -1; }

        .container { width: 95%; max-width: 1200px; margin: 0 auto; padding: 40px 10px; }

        /* الهيدر الاحترافي */
        .top-glass-nav {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(15px);
            border-bottom: 2px solid var(--gold-dark);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .nav-content { display: flex; justify-content: space-around; align-items: center; }
        .live-timer { font-size: 1.8rem; font-weight: 900; color: var(--gold-main); text-shadow: var(--text-glow); }

        /* اللوجو والعنوان */
        .hero-header { text-align: center; margin: 60px 0; }
        .logo-img { width: 380px; filter: drop-shadow(0 0 30px var(--gold-main)); animation: pulse 3s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.05); opacity: 0.8; } }

        .quran-verse {
            font-family: 'Amiri', serif;
            font-size: 4.5rem;
            color: var(--gold-main);
            margin: 30px 0;
            text-shadow: 2px 2px 10px #000;
        }

        /* كارت الاستمارة المطور */
        .mega-application-form {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 60px;
            padding: 80px 50px;
            box-shadow: 0 0 100px rgba(0,0,0,1);
            position: relative;
            overflow: hidden;
        }

        .mega-application-form::before {
            content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 10px;
            background: linear-gradient(90deg, transparent, var(--gold-main), transparent);
        }

        .field-label { color: var(--gold-main); font-weight: 700; margin-bottom: 15px; display: block; font-size: 1.2rem; }

        .form-control {
            width: 100%;
            background: rgba(255,255,255,0.05);
            border: 2px solid #30363d;
            border-radius: 20px;
            padding: 25px;
            color: #fff;
            font-size: 1.3rem;
            transition: 0.4s;
        }

        .form-control:focus {
            border-color: var(--gold-main);
            background: rgba(255,255,255,0.1);
            box-shadow: 0 0 20px rgba(255,204,51,0.2);
        }

        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; margin-bottom: 40px; }

        /* بوكسات الآيات الذكية */
        .sync-box {
            background: rgba(0,0,0,0.5);
            border-radius: 30px;
            padding: 30px;
            border-right: 8px solid var(--gold-main);
            margin-top: 20px;
        }

        .aya-text-display { font-family: 'Amiri'; font-size: 2rem; color: #e2e8f0; line-height: 2.2; text-align: right; }
        .page-info-tag { background: var(--gold-main); color: #000; padding: 5px 20px; border-radius: 50px; font-weight: 900; margin-top: 15px; display: inline-block; }

        /* أزرار الرفع الاحترافية جداً */
        .advanced-upload-wrapper { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 60px; }
        
        .premium-upload-btn {
            height: 400px;
            border: 4px dashed var(--border-color);
            border-radius: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: 0.5s;
            background: rgba(255, 204, 51, 0.01);
            position: relative;
            overflow: hidden;
        }

        .premium-upload-btn:hover { border-color: var(--gold-main); background: rgba(255, 204, 51, 0.05); transform: translateY(-10px); }

        .btn-icon { font-size: 5rem; color: var(--gold-main); margin-bottom: 20px; transition: 0.5s; }
        
        .preview-img-full { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; display: none; z-index: 10; }
        .preview-aud-full { width: 90%; z-index: 20; display: none; }

        .submit-world-btn {
            width: 100%;
            padding: 40px;
            background: linear-gradient(135deg, var(--gold-dark), var(--gold-main));
            border: none;
            border-radius: 30px;
            font-family: 'Cairo';
            font-size: 3rem;
            font-weight: 900;
            color: #000;
            cursor: pointer;
            margin-top: 80px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.4);
            transition: 0.5s;
        }

        .submit-world-btn:hover { letter-spacing: 5px; filter: brightness(1.2); }

        /* شاشة التحميل المعقدة */
        #pro-loader {
            display: none; position: fixed; inset: 0; background: #000; z-index: 10000;
            flex-direction: column; justify-content: center; align-items: center;
        }

        .loader-circle { width: 250px; height: 250px; border: 15px solid #1a1a1a; border-top: 15px solid var(--gold-main); border-radius: 50%; animation: spin 1s infinite linear; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        @media (max-width: 768px) {
            .quran-verse { font-size: 2.5rem; }
            .advanced-upload-wrapper { grid-template-columns: 1fr; }
            .mega-application-form { padding: 40px 20px; }
        }
    </style>
</head>
<body>

<canvas id="stars-canvas"></canvas>

<div id="pro-loader">
    <div class="loader-circle"></div>
    <div id="load-p" style="font-size: 5rem; color: var(--gold-main); font-weight: 900; margin-top: 40px;">0%</div>
    <p id="load-status" style="font-size: 2rem; color: #fff; font-family: 'Amiri'; text-align: center; margin-top: 20px;"></p>
</div>

<div class="top-glass-nav">
    <div class="nav-content">
        <div class="live-timer" id="clock-engine">00:00:00</div>
        <div style="font-size: 1.2rem; font-weight: bold; color: var(--gold-main);">منصة القراء العالمية | تقديم الطلبات</div>
        <div id="date-engine">-- رمضان 1447</div>
    </div>
</div>

<div class="container animate__animated animate__fadeIn">
    
    <header class="hero-header">
        <img src="https://i.postimg.cc/0yZxfgx2/Picsart-26-01-13-17-01-28-072.png" class="logo-img">
        <h1 class="quran-verse">﴿ وَرَتِّلِ الْقُرْآنَ تَرْتِيلًا ﴾</h1>
    </header>

    <main class="mega-application-form">
        <h2 style="text-align: center; font-size: 3rem; color: var(--gold-main); margin-bottom: 60px;">بيانات الاعتماد الرسمية</h2>
        
        <form id="submission-engine">
            
            <div class="grid-3">
                <div class="field-item">
                    <label class="field-label">اسم القارئ بالكامل</label>
                    <input type="text" id="node-name" class="form-control" placeholder="اكتب اسمك الثلاثي" required>
                </div>
                <div class="field-item">
                    <label class="field-label">رقم التواصل الواتساب</label>
                    <input type="tel" id="node-phone" class="form-control" placeholder="+20..." required>
                </div>
                <div class="field-item">
                    <label class="field-label">اختر السورة المباركة</label>
                    <select id="node-sura" class="form-control" onchange="QuranCore.initAyaSync()"></select>
                </div>
            </div>

            <div class="grid-3">
                <div class="field-item">
                    <label class="field-label">من آية رقم</label>
                    <select id="node-from" class="form-control" onchange="QuranCore.fetchAyaData('from')"></select>
                    <div class="sync-box">
                        <p class="aya-text-display" id="txt-from">جاري الانتظار...</p>
                        <span class="page-info-tag" id="pg-from">صفحة: --</span>
                    </div>
                </div>
                <div class="field-item">
                    <label class="field-label">إلى آية رقم</label>
                    <select id="node-to" class="form-control" onchange="QuranCore.fetchAyaData('to')"></select>
                    <div class="sync-box">
                        <p class="aya-text-display" id="txt-to">جاري الانتظار...</p>
                        <span class="page-info-tag" id="pg-to">صفحة: --</span>
                    </div>
                </div>
            </div>

            <div class="advanced-upload-wrapper">
                <div class="premium-upload-btn" onclick="document.getElementById('file-p').click()">
                    <i class="fas fa-camera-retro btn-icon"></i>
                    <span style="font-size: 1.5rem; color: var(--gold-main);">ارفق صورتك الشخصية</span>
                    <img id="view-p" class="preview-img-full">
                    <input type="file" id="file-p" hidden accept="image/*" onchange="QuranCore.previewMedia(this, 'img')">
                </div>
                <div class="premium-upload-btn" onclick="document.getElementById('file-a').click()">
                    <i class="fas fa-microphone-alt btn-icon" id="aud-icon"></i>
                    <span style="font-size: 1.5rem; color: var(--gold-main);" id="aud-label">ارفع ملف التلاوة</span>
                    <audio id="view-a" controls class="preview-aud-full"></audio>
                    <input type="file" id="file-a" hidden accept="audio/*" onchange="QuranCore.previewMedia(this, 'aud')">
                </div>
            </div>

            <button type="submit" class="submit-world-btn">إرسال البيانات إلى السيرفر الرئيسي</button>
        </form>
    </main>

</div>

<script>
/**
 * =========================================
 * محرك الربط البرمجي الشامل (The Core Engine)
 * =========================================
 */

const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyFuMa99FTBcykVxdxd_0Stn2mQqeb9vE5ArZY39kQCyXNaALYcXsg5plbdpbjlUmXhsQ/exec";

const QuranCore = {
    suras: [
        ["الفاتحة", 7], ["البقرة", 286], ["آل عمران", 200], ["النساء", 176], ["المائدة", 120], ["الأنعام", 165], ["الأعراف", 206], ["الأنفال", 75], ["التوبة", 129], ["يونس", 109], ["هود", 123], ["يوسف", 111], ["الرعد", 43], ["إبراهيم", 52], ["الحجر", 99], ["النحل", 128], ["الإسراء", 111], ["الكهف", 110], ["مريم", 98], ["طه", 135], ["الأنبياء", 112], ["الحج", 78], ["المؤمنون", 118], ["النور", 64], ["الفرقان", 77], ["الشعراء", 227], ["النمل", 93], ["القصص", 88], ["العنكبوت", 69], ["الروم", 60], ["لقمان", 34], ["السجدة", 30], ["الأحزاب", 73], ["سبأ", 54], ["فاطر", 45], ["يس", 83], ["الصافات", 182], ["ص", 88], ["الزمر", 75], ["غافر", 85], ["فصلت", 54], ["الشورى", 53], ["الزخرف", 89], ["الدخان", 59], ["الجاثية", 37], ["الأحقاف", 35], ["محمد", 38], ["الفتح", 29], ["الحجرات", 18], ["ق", 45], ["الذاريات", 60], ["الطور", 49], ["النجم", 62], ["القمر", 55], ["الرحمن", 78], ["الواقعة", 96], ["الحديد", 29], ["المجادلة", 22], ["الحشر", 24], ["الممتحنة", 13], ["الصف", 14], ["الجمعة", 11], ["المنافقون", 11], ["التغابن", 18], ["الطلاق", 12], ["التحريم", 12], ["الملك", 30], ["القلم", 52], ["الحاقة", 52], ["المعارج", 44], ["نوح", 28], ["الجن", 28], ["المزمل", 20], ["المدثر", 56], ["القيامة", 40], ["الإنسان", 31], ["المرسلات", 50], ["النبأ", 40], ["النازعات", 46], ["عبس", 42], ["التكوير", 29], ["الانفطار", 19], ["المطففين", 36], ["الانشقاق", 25], ["البروج", 22], ["الطارق", 17], ["الأعلى", 19], ["الغاشية", 26], ["الفجر", 30], ["البلد", 20], ["الشمس", 15], ["الليل", 21], ["الضحى", 11], ["الشرح", 8], ["التين", 8], ["العلق", 19], ["القدر", 5], ["البينة", 8], ["الزلزلة", 8], ["العاديات", 11], ["القارعة", 11], ["التكاثر", 8], ["العصر", 3], ["الهمزة", 9], ["الفيل", 5], ["قريش", 4], ["الماعون", 7], ["الكوثر", 3], ["الكافرون", 6], ["النصر", 3], ["المسد", 5], ["الإخلاص", 4], ["الفلق", 5], ["الناس", 6]
    ],

    init() {
        this.fillSuras();
        this.updateClock();
        this.initStars();
        setInterval(() => this.updateClock(), 1000);
        this.initAyaSync();
    },

    fillSuras() {
        const s = document.getElementById('node-sura');
        this.suras.forEach((name, i) => s.add(new Option(`سورة ${name[0]}`, i+1)));
    },

    initAyaSync() {
        const suraIdx = document.getElementById('node-sura').value;
        const count = this.suras[suraIdx-1][1];
        const f = document.getElementById('node-from'), t = document.getElementById('node-to');
        f.innerHTML = ''; t.innerHTML = '';
        for(let i=1; i<=count; i++) {
            f.add(new Option(`آية ${i}`, i));
            t.add(new Option(`آية ${i}`, i));
        }
        this.fetchAyaData('from'); this.fetchAyaData('to');
    },

    async fetchAyaData(type) {
        const sNum = document.getElementById('node-sura').value;
        const aNum = document.getElementById(`node-${type}`).value;
        const txt = document.getElementById(`txt-${type}`), pg = document.getElementById(`pg-${type}`);
        
        txt.innerText = "جاري الاتصال بالسيرفر...";
        try {
            const res = await fetch(`https://api.alquran.cloud/v1/ayah/${sNum}:${aNum}/ar.medina`);
            const d = await res.json();
            txt.innerText = d.data.text;
            pg.innerText = "صفحة: " + d.data.page;
        } catch(e) { txt.innerText = "تعذر جلب الآية"; }
    },

    previewMedia(input, type) {
        if(input.files[0]) {
            const r = new FileReader();
            r.onload = e => {
                if(type === 'img') {
                    const v = document.getElementById('view-p');
                    v.src = e.target.result; v.style.display = 'block';
                } else {
                    const v = document.getElementById('view-a');
                    v.src = e.target.result; v.style.display = 'block';
                    document.getElementById('aud-icon').style.display = 'none';
                    document.getElementById('aud-label').style.display = 'none';
                }
            };
            r.readAsDataURL(input.files[0]);
        }
    },

    updateClock() {
        const n = new Date();
        document.getElementById('clock-engine').innerText = n.toLocaleTimeString('ar-EG');
        document.getElementById('date-engine').innerText = new Intl.DateTimeFormat('ar-SA-u-ca-islamic-umalqura-nu-latn', {day:'numeric', month:'long', year:'numeric'}).format(n);
    },

    initStars() {
        const c = document.getElementById('stars-canvas'), x = c.getContext('2d');
        c.width = window.innerWidth; c.height = window.innerHeight;
        let s = Array(200).fill().map(() => ({ x:Math.random()*c.width, y:Math.random()*c.height, r:Math.random()*1.5 }));
        const draw = () => {
            x.clearRect(0,0,c.width,c.height); x.fillStyle = "#ffcc33";
            s.forEach(p => { x.beginPath(); x.arc(p.x, p.y, p.r, 0, Math.PI*2); x.fill(); p.y += 0.2; if(p.y > c.height) p.y = 0; });
            requestAnimationFrame(draw);
        }; draw();
    }
};

window.onload = () => QuranCore.init();

// نظام إرسال البيانات إلى Google Sheets
document.getElementById('submission-engine').onsubmit = async function(e) {
    e.preventDefault();
    const loader = document.getElementById('pro-loader');
    loader.style.display = 'flex';
    
    // محاكاة رفع البيانات
    let p = 0;
    const interval = setInterval(() => {
        if(p < 100) {
            p++;
            document.getElementById('load-p').innerText = p + "%";
            document.getElementById('load-status').innerText = "جاري تشفير البيانات وربطها بجدول جوجل...";
        }
    }, 50);

    // تجميع البيانات
    const formData = new FormData();
    formData.append("name", document.getElementById('node-name').value);
    formData.append("phone", document.getElementById('node-phone').value);
    formData.append("sura", document.getElementById('node-sura').selectedOptions[0].text);
    formData.append("from", document.getElementById('node-from').value);
    formData.append("to", document.getElementById('node-to').value);

    try {
        await fetch(SCRIPT_URL, { method: "POST", body: formData, mode: "no-cors" });
        clearInterval(interval);
        document.getElementById('load-p').innerText = "100%";
        Swal.fire({
            title: 'تم الإرسال بنجاح!',
            text: 'تم حفظ تلاوتك في قاعدة البيانات، سنتواصل معك قريباً.',
            icon: 'success',
            confirmButtonText: 'ممتاز'
        }).then(() => location.reload());
    } catch(err) {
        alert("حدث خطأ في الاتصال بالسيرفر");
        loader.style.display = 'none';
    }
};
</script>

</body>
</html>
