<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إمبراطورية أهل القرآن - عبد الرحمن مكي</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Cairo:wght@600;900&family=Reem+Kufi:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { 
            --gold: #ffcc33; 
            --gold-glow: 0 0 25px rgba(255, 204, 51, 0.7);
            --bg-dark: #050505;
            --glass: rgba(255, 255, 255, 0.07);
        }
        
        body {
            font-family: 'Cairo', sans-serif; margin: 0; color: #fff; background: var(--bg-dark);
            background-image: radial-gradient(circle at center, #111 0%, #000 100%);
            min-height: 100vh; overflow-x: hidden; padding-bottom: 120px;
        }

        .container { width: 94%; max-width: 600px; margin: auto; position: relative; z-index: 10; }

        /* اللقب الملكي المتوهج */
        .maki-header { 
            font-family: 'Reem Kufi', sans-serif; font-size: 1.6rem; color: var(--gold);
            text-align: center; padding: 30px 10px; line-height: 1.6; text-shadow: var(--gold-glow);
        }

        /* بروفايل المستخدم الاحترافي */
        .profile-section {
            background: var(--glass); border: 2px solid var(--gold); border-radius: 30px;
            padding: 20px; margin: 20px 0; position: relative;
        }
        .profile-main { display: flex; align-items: center; gap: 20px; }
        .avatar-wrapper { position: relative; width: 90px; height: 90px; }
        .avatar-wrapper img { width: 100%; height: 100%; border-radius: 50%; border: 3px solid var(--gold); object-fit: cover; }
        .edit-overlay { 
            position: absolute; bottom: 0; right: 0; background: var(--gold); 
            color: #000; padding: 5px; border-radius: 50%; cursor: pointer; font-size: 0.8rem;
        }

        .user-data h2 { margin: 0; font-size: 1.3rem; color: #fff; }
        .points-pill { background: var(--gold); color: #000; padding: 3px 12px; border-radius: 20px; font-weight: 900; font-size: 0.8rem; margin-top: 5px; display: inline-block; }

        /* منطقة "شاهد الآن" */
        .live-feed {
            background: rgba(255,0,0,0.1); border: 1px solid #ff4444; border-radius: 15px;
            padding: 10px; margin: 20px 0; display: flex; align-items: center; gap: 10px;
        }
        .live-dot { width: 10px; height: 10px; background: #ff4444; border-radius: 50%; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        /* قسم المسابقة الكبرى */
        .mega-quiz {
            background: rgba(20,20,20,0.95); border-radius: 25px; padding: 25px;
            border: 1px solid rgba(255,204,51,0.3); margin-top: 20px; box-shadow: var(--gold-glow);
        }
        .q-tag { background: var(--gold); color: #000; padding: 2px 10px; border-radius: 5px; font-size: 0.7rem; font-weight: bold; margin-bottom: 10px; display: inline-block; }
        .q-title { font-size: 1.2rem; margin: 15px 0; line-height: 1.6; }

        .btn-opt {
            width: 100%; padding: 14px; margin-bottom: 10px; border-radius: 12px;
            border: 1px solid #333; background: #111; color: #fff; cursor: pointer;
            transition: 0.3s; text-align: right; font-family: 'Cairo';
        }
        .btn-opt:hover { background: var(--gold); color: #000; font-weight: bold; }

        /* نظام إضافة الأصدقاء */
        .friend-system { display: flex; overflow-x: auto; gap: 15px; padding: 10px 0; margin-top: 10px; scrollbar-width: none; }
        .friend-card { min-width: 70px; text-align: center; }
        .friend-card img { width: 50px; height: 50px; border-radius: 50%; border: 1px solid #555; }
        .friend-card p { font-size: 0.7rem; margin: 5px 0; }
        .add-friend-btn { width: 50px; height: 50px; border-radius: 50%; border: 1px dashed var(--gold); display: flex; align-items: center; justify-content: center; color: var(--gold); cursor: pointer; }

        .glowing-verse {
            font-family: 'Amiri', serif; font-size: 2.3rem; text-align: center; margin: 35px 0;
            color: #fff; text-shadow: 0 0 15px var(--gold); animation: pulse 2s infinite alternate;
        }
        @keyframes pulse { from { opacity: 0.7; transform: scale(0.95); } to { opacity: 1; transform: scale(1.03); } }

        .final-verse { font-family: 'Amiri', serif; font-size: 2rem; text-align: center; color: var(--gold); margin: 60px 0; text-shadow: var(--gold-glow); }

        /* نافذة تعديل البيانات */
        #editModal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 1000; justify-content: center; align-items: center;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="maki-header">
            <img src="https://i.postimg.cc/rDsR6fgv/Picsart-25-03-28-19-08-45-917.png" style="width:110px; filter:drop-shadow(0 0 10px var(--gold));">
            <br> داعم المواهب للقرآن الكريم <br>
            خادم القرآن عبد الرحمن مكي
        </div>

        <div class="profile-section">
            <div class="profile-main">
                <div class="avatar-wrapper">
                    <img id="uPic" src="https://cdn-icons-png.flaticon.com/512/149/149071.png">
                    <div class="edit-overlay" onclick="toggleModal()"><i class="fas fa-pen"></i></div>
                </div>
                <div class="user-data">
                    <h2 id="uName">زائر منصة القرآن</h2>
                    <span class="points-pill"><i class="fas fa-heart"></i> <span id="uPoints">0</span> حسنة</span>
                </div>
            </div>
            
            <p style="font-size: 0.8rem; color: var(--gold); margin-top: 15px;"><i class="fas fa-users"></i> رفاق القرآن:</p>
            <div class="friend-system">
                <div class="add-friend-btn" onclick="alert('جاري البحث عن رفقاء الحفظ...')"><i class="fas fa-plus"></i></div>
                <div class="friend-card"><img src="https://i.pravatar.cc/100?img=11"><p>أحمد</p></div>
                <div class="friend-card"><img src="https://i.pravatar.cc/100?img=12"><p>محمد</p></div>
                <div class="friend-card"><img src="https://i.pravatar.cc/100?img=13"><p>ياسين</p></div>
            </div>
        </div>

        <div class="live-feed">
            <div class="live-dot"></div>
            <span style="font-size: 0.85rem; font-weight: bold;">شاهد الآن: تلاوة مباركة جديدة برعاية عبد الرحمن مكي</span>
        </div>

        <div class="glowing-verse">وَرَتِّلِ الْقُرْآنَ تَرْتِيلًا</div>

        <div class="mega-quiz">
            <span class="q-tag" id="qTag">اختبار الحفظ</span>
            <div class="q-title" id="qTitle">جاري تحضير السؤال الإيماني...</div>
            <div id="qBody"></div>
            <p id="qStatus" style="text-align:center; font-weight:bold; margin-top:10px;"></p>
        </div>

        <div style="margin-top: 30px; background: var(--glass); padding: 25px; border-radius: 25px; border: 1px solid var(--gold);">
            <h3 style="text-align:center; color:var(--gold);"><i class="fas fa-microphone-alt"></i> أرسل صوتك للعالم</h3>
            <form id="talentForm">
                <input type="file" id="fileIn" accept="audio/*" style="display:none" required onchange="document.getElementById('fileLabel').innerText='✅ تم اختيار الملف'">
                <div onclick="document.getElementById('fileIn').click()" id="fileLabel" style="border: 2px dashed var(--gold); padding: 20px; text-align:center; cursor:pointer; border-radius:15px; margin-bottom:15px;">
                    انقر هنا لاختيار ملف التلاوة
                </div>
                <button type="submit" style="width:100%; padding:18px; border-radius:50px; border:none; background:linear-gradient(45deg, #d4af37, #ffcc33); color:#000; font-weight:900; font-size:1.2rem; cursor:pointer;">إرسال لخادم القرآن</button>
            </form>
        </div>

        <div class="final-verse">أَلَا بِذِكْرِ اللَّهِ تَطْمَئِنُّ الْقُلُوبُ</div>
    </div>

    <div id="editModal">
        <div style="background:#111; padding:30px; border-radius:20px; width:85%; max-width:400px; border:1px solid var(--gold);">
            <h3 style="color:var(--gold); text-align:center;">تحديث ملفك الإيماني</h3>
            <input type="text" id="newName" placeholder="الاسم الجديد" style="width:100%; padding:12px; margin-bottom:15px; background:#000; border:1px solid #444; color:#fff; border-radius:10px;">
            <input type="file" id="newPic" accept="image/*" style="width:100%; color:#fff; margin-bottom:15px;">
            <button onclick="updateProfile()" style="width:100%; padding:12px; background:var(--gold); border:none; border-radius:10px; font-weight:bold;">حفظ التغييرات</button>
            <button onclick="toggleModal()" style="width:100%; margin-top:10px; background:transparent; color:#888; border:none;">إغلاق</button>
        </div>
    </div>

<script>
    let db = JSON.parse(localStorage.getItem('makiGlobal')) || { points: 0, name: 'زائر أهل القرآن', img: '' };

    function sync() {
        document.getElementById('uName').innerText = db.name;
        document.getElementById('uPoints').innerText = db.points;
        if(db.img) document.getElementById('uPic').src = db.img;
    }

    function toggleModal() {
        const m = document.getElementById('editModal');
        m.style.display = m.style.display === 'flex' ? 'none' : 'flex';
    }

    async function updateProfile() {
        const nameInput = document.getElementById('newName').value;
        const picInput = document.getElementById('newPic').files[0];
        
        if(nameInput) db.name = nameInput;
        if(picInput) {
            const reader = new FileReader();
            reader.onload = (e) => {
                db.img = e.target.result;
                localStorage.setItem('makiGlobal', JSON.stringify(db));
                sync();
            };
            reader.readAsDataURL(picInput);
        } else {
            localStorage.setItem('makiGlobal', JSON.stringify(db));
            sync();
        }
        toggleModal();
    }

    // نظام الـ 1000 سؤال (محاكاة بأنواع مختلفة)
    const questions = [
        {type: 'verse', q: 'أكمل الآية: "إِنَّا نَحْنُ نَزَّلْنَا الذِّكْرَ ..."', a: 'وَإِنَّا لَهُ لَحَافِظُونَ'},
        {type: 'sura', q: 'في أي سورة وردت آية الكرسي؟', o: ['البقرة', 'آل عمران', 'النساء'], a: 'البقرة'},
        {type: 'hadith', q: 'قال ﷺ: "خَيْرُكُمْ مَنْ تَعَلَّمَ القُرْآنَ ..."', a: 'وَعَلَّمَهُ'},
        {type: 'who', q: 'من هو الصحابي الذي اهتز لموته عرش الرحمن؟', o: ['سعد بن معاذ', 'خالد بن الوليد', 'حمزة'], a: 'سعد بن معاذ'},
        {type: 'verse', q: 'ما هي الآية التي تكررت 31 مرة في سورة الرحمن؟', a: 'فَبِأَيِّ آلَاءِ رَبِّكُمَا تُكَذِّبَانِ'}
    ];

    function loadQ() {
        const q = questions[Math.floor(Math.random() * questions.length)];
        const body = document.getElementById('qBody');
        document.getElementById('qTitle').innerText = q.q;
        document.getElementById('qTag').innerText = q.type === 'verse' ? 'أكمل الآية' : 'ثقافة إيمانية';
        body.innerHTML = '';

        if(q.o) {
            q.o.forEach(opt => {
                body.innerHTML += `<button class="btn-opt" onclick="check('${opt}', '${q.a}')">${opt}</button>`;
            });
        } else {
            body.innerHTML += `<input type="text" id="ansIn" style="width:100%; padding:14px; border-radius:12px; border:1px solid var(--gold); background:#000; color:#fff; text-align:center; margin-bottom:10px;">`;
            body.innerHTML += `<button onclick="check(document.getElementById('ansIn').value, '${q.a}')" style="width:100%; padding:12px; background:var(--gold); border-radius:12px; border:none; font-weight:bold;">تأكيد الإجابة</button>`;
        }
    }

    function check(user, correct) {
        const s = document.getElementById('qStatus');
        if(user.includes(correct)) {
            s.innerHTML = "✨ أحسنت! +20 نقطة حسنة"; s.style.color = "#4CAF50";
            db.points += 20; localStorage.setItem('makiGlobal', JSON.stringify(db));
            sync();
            setTimeout(loadQ, 2000);
        } else {
            s.innerHTML = "❌ حاول مرة أخرى يا رفيق المصحف"; s.style.color = "#f44336";
        }
    }

    sync(); loadQ();
</script>
</body>
</html>
