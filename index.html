<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ø§Ø¹Ù… Ø§Ù„Ù…ÙˆØ§Ù‡Ø¨ Ù„Ù„Ù‚Ø±Ø§Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - Ø±Ù…Ø¶Ø§Ù† 1447</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&family=Almarai:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <style>
        :root { --gold: #ffcc33; --gold-glow: rgba(255, 204, 51, 0.5); --ramadan-blue: #001a33; }
        
        body {
            font-family: 'Almarai', sans-serif;
            margin: 0; color: #fff;
            background: radial-gradient(circle at center, #002b5c 0%, #000 100%);
            min-height: 100vh; padding: 20px 0 120px 0;
            overflow-x: hidden;
            position: relative;
        }

        /* ÙØ§Ù†ÙˆØ³ Ø±Ù…Ø¶Ø§Ù† Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ */
        #ramadan-lantern {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 80px;
            z-index: 1001;
            cursor: grab;
            filter: drop-shadow(0 0 15px var(--gold));
            transition: transform 0.1s ease-out;
            user-select: none;
        }

        /* Ø²ÙŠÙ†Ø© Ø±Ù…Ø¶Ø§Ù† */
        .zena {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background: url('https://www.transparentpng.com/download/ramadan/ramadan-decor-lights-png-20.png') repeat-x;
            background-size: contain;
            z-index: 6;
            opacity: 0.8;
        }

        #interactive-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .container { width: 92%; max-width: 500px; margin: auto; transition: 0.3s; position: relative; z-index: 5; }
        @media (min-width: 768px) {
            .container { max-width: 700px; }
            .form-card { padding: 35px; }
        }
        
        .header-section { text-align: center; margin-bottom: 25px; }
        .logo-main { width: 130px; filter: drop-shadow(0 0 15px var(--gold-glow)); animation: pulse 2s infinite; }
        .site-name { font-family: 'Cairo'; color: var(--gold); font-size: 1.3rem; margin-top: 10px; }
        .quran-verse { font-family: 'Cairo'; font-size: 1.8rem; margin: 15px 0; color: #fff; font-weight: 900; text-shadow: 0 0 10px var(--gold-glow); }

        .info-bar { background: rgba(0, 26, 51, 0.9); border: 2px solid var(--gold); border-radius: 20px; padding: 15px; margin-bottom: 25px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; text-align: center; backdrop-filter: blur(10px); }
        .info-item { display: flex; flex-direction: column; justify-content: center; transition: 0.3s; }
        .info-item:hover { transform: scale(1.05); }
        .info-item i { color: var(--gold); margin-bottom: 5px; font-size: 1.2rem; }
        .info-val { font-family: 'Cairo'; font-weight: 700; font-size: 0.85rem; color: #fff; }
        .time-display { font-size: 1.1rem; color: var(--gold); font-weight: 900; letter-spacing: 1px; }
        
        /* Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ ÙˆØ§Ù„ÙØªÙˆØ­Ø§Øª */
        .hijri-event-tag { font-size: 0.75rem; color: #000; background: var(--gold); padding: 8px; border-radius: 10px; font-weight: 900; margin-top: 8px; display: inline-block; line-height: 1.4; border: 1px solid #fff; }
        .history-fact { font-size: 0.7rem; color: #fff; margin-top: 5px; font-style: italic; background: rgba(0,0,0,0.3); padding: 5px; border-radius: 5px; }

        /* Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ø±Ù…Ø¶Ø§Ù† */
        .countdown-box { background: linear-gradient(to bottom, #001a33, #000); border: 1px solid var(--gold); border-radius: 15px; padding: 10px; margin-bottom: 20px; text-align: center; }
        .countdown-title { color: var(--gold); font-size: 0.8rem; margin-bottom: 5px; font-weight: bold; }
        #countdown-timer { font-family: 'Cairo'; font-size: 1.2rem; color: #fff; font-weight: 900; text-shadow: 0 0 5px var(--gold); }

        .announcement-card { background: rgba(20, 20, 20, 0.85); border: 1px solid var(--gold); border-radius: 20px; padding: 20px; margin-bottom: 25px; text-align: right; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .ann-title { color: var(--gold); font-family: 'Cairo'; font-weight: 900; font-size: 1.1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 10px; }
        
        .motivational-box { text-align: center; background: rgba(255, 204, 51, 0.08); border-right: 4px solid var(--gold); padding: 15px; margin-bottom: 25px; border-radius: 0 15px 15px 0; backdrop-filter: blur(2px); position: relative; }
        .motivational-box p { font-size: 1.05rem; color: #eee; line-height: 1.6; margin: 0; font-weight: bold; }

        .video-box { border: 2px solid var(--gold); border-radius: 20px; overflow: hidden; aspect-ratio: 16/9; box-shadow: 0 0 20px var(--gold-glow); margin-bottom: 20px; position: relative; }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ­Ø±ÙŠÙƒ */
        .social-call { text-align: center; margin: 20px 0; background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 20px; border: 1px dashed var(--gold); cursor: move; }
        .s-box { background: #000; width: 55px; height: 55px; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; text-decoration: none; border: 2px solid var(--gold); transition: 0.4s; touch-action: none; }

        .form-card { background: rgba(10, 10, 10, 0.95); border: 2px solid var(--gold); padding: 25px; border-radius: 25px; text-align: center; backdrop-filter: blur(15px); }
        .field { text-align: right; margin-bottom: 15px; position: relative; }
        .field label { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; color: var(--gold); font-size: 0.9rem; font-weight: bold; }
        
        .field input, .field select { width: 100%; padding: 12px 35px 12px 12px; background: #000; border: 1px solid #333; color: #fff; border-radius: 10px; outline: none; }

        .main-btn { width: 100%; background: linear-gradient(45deg, #ffcc33, #e6b800); color: #000; padding: 16px; border: none; border-radius: 50px; font-family: 'Cairo'; font-weight: 900; font-size: 1.2rem; cursor: pointer; box-shadow: 0 5px 15px rgba(255,204,51,0.3); }

        .footer-credit { text-align: center; margin-top: 40px; }
        .quran-final-verse { color: var(--gold); font-family: 'Cairo'; font-size: 1.5rem; font-weight: 900; margin-top: 30px; text-shadow: 0 0 10px var(--gold-glow); animation: fadeIn 3s infinite alternate; }

        #loadingOverlay { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.98); z-index: 9999; justify-content: center; align-items: center; 
            flex-direction: column; text-align: center; padding: 20px;
        }
        #progressText { color: var(--gold); font-size: 3.5rem; font-weight: 900; margin-bottom: 10px; font-family: 'Cairo'; }

        .fixed-call-btn { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 420px; z-index: 1000; background: #000; border: 2px solid var(--gold); border-radius: 50px; padding: 15px; display: flex; align-items: center; justify-content: center; gap: 12px; text-decoration: none; box-shadow: 0 0 20px var(--gold-glow); }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
    </style>
</head>
<body>

<div class="zena"></div>
<img src="https://cdn-icons-png.flaticon.com/512/2319/2319803.png" id="ramadan-lantern" alt="ÙØ§Ù†ÙˆØ³ Ø±Ù…Ø¶Ø§Ù†">

<canvas id="interactive-bg"></canvas>

<div id="loadingOverlay">
    <div id="progressText">0%</div>
    <div style="color:var(--gold); margin-bottom:20px;"><i class="fas fa-quran fa-spin fa-2x"></i></div>
    <div id="quizBox" style="border: 2px solid var(--gold); padding: 25px; border-radius: 20px; background: #111; max-width: 320px; width: 90%;">
        <p style="color:#888; font-size:0.8rem; margin-top:0;"><i class="fas fa-moon"></i> Ù†ÙØ­Ø§Øª Ø±Ù…Ø¶Ø§Ù†ÙŠØ© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø±ÙØ¹..</p>
        <div id="quizQ" style="color: var(--gold); font-size: 1.1rem; font-weight: bold; margin-bottom: 15px;">ØªØ­Ù…ÙŠÙ„...</div>
        <div id="quizA" style="color: #fff; font-size: 1.1rem; opacity: 1; transition: 0.8s; line-height: 1.6;">...</div>
    </div>
</div>

<div class="container animate__animated animate__fadeIn">
    <div class="header-section">
        <img src="https://i.postimg.cc/0yZxfgx2/Picsart-26-01-13-17-01-28-072.png" class="logo-main">
        <div class="site-name">ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… ğŸŒ™<br><i class="fas fa-star"></i> Ø¯Ø§Ø¹Ù… Ø§Ù„Ù…ÙˆØ§Ù‡Ø¨ Ù„Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… <i class="fas fa-star"></i></div>
        <div class="quran-verse">ÙˆÙØ±ÙØªÙÙ‘Ù„Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù ØªÙØ±Ù’ØªÙÙŠÙ„Ù‹Ø§</div>
    </div>

    <div class="countdown-box">
        <div class="countdown-title" id="countdown-label">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø´Ù‡Ø± Ø§Ù„Ù‚Ø±Ø¢Ù†</div>
        <div id="countdown-timer">-- ÙŠÙˆÙ… : -- Ø³Ø§Ø¹Ø© : -- Ø¯Ù‚ÙŠÙ‚Ø©</div>
    </div>

    <div class="info-bar animate__animated animate__zoomIn">
        <div class="info-item" style="border-left: 1px solid rgba(255,204,51,0.3)">
            <i class="fas fa-history"></i>
            <span class="info-val" style="color: var(--gold); font-weight: 900;">Ù…Ø§Ø°Ø§ Ø­Ø¯Ø« ÙÙŠ Ù…Ø«Ù„ Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…ØŸ</span>
            <div id="hijriEvent" class="hijri-event-tag">ÙŠÙˆÙ… 19 Ø´Ø¹Ø¨Ø§Ù†: ÙØªØ­ Ø­ØµÙˆÙ† Ø®ÙŠØ¨Ø±</div>
            <div id="liveTime" class="time-display" style="margin-top:5px; font-size: 0.8rem;">00:00:00</div>
        </div>
        <div class="info-item">
            <i class="fas fa-calendar-alt"></i>
            <span id="combinedDate" class="info-val" style="color: #fff; margin-top:5px;">-- -- ----</span>
            <span class="info-val" style="color: var(--gold); font-size: 0.7rem; margin-top:5px;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù†Ø¬Ø¹ Ø¹Ù„ÙˆØ§Ù†</span>
        </div>
    </div>

    <div class="motivational-box animate__animated animate__fadeInLeft">
        <p>ğŸŒ™ "Ø±Ù…Ø¶Ø§Ù† Ø´Ù‡Ø± Ø§Ù„Ù‚Ø±Ø¢Ù†.. Ø§Ø¬Ø¹Ù„ ØµÙˆØªÙƒ Ù†ØºÙ…Ø§Ù‹ ÙŠÙ…Ù„Ø£ Ø§Ù„Ù‚Ù„ÙˆØ¨ Ø¥ÙŠÙ…Ø§Ù†Ø§Ù‹ØŒ ÙƒÙ† Ø£Ù†Øª Ø§Ù„Ù†Ø¬Ù… ÙÙŠ Ù„ÙŠØ§Ù„ÙŠÙ†Ø§ Ø§Ù„Ù…Ø¨Ø§Ø±ÙƒØ©."</p>
    </div>

    <div class="video-card animate__animated animate__fadeInUp">
        <div class="video-box">
            <i class="fab fa-youtube v-icon" style="position: absolute; top: 10px; left: 10px; color: var(--gold); z-index: 7;"></i>
            <iframe src="https://www.youtube.com/embed/LeUouzj6wns" allowfullscreen></iframe>
        </div>
    </div>

    <div class="social-call animate__animated animate__pulse animate__infinite" id="draggableSocial">
        <h4><i class="fas fa-lightbulb"></i> Ø´Ø§Ø±ÙƒÙ†Ø§ Ø§Ù„Ø£Ø¬Ø± ÙˆØ§Ù†Ø´Ø± ØªÙ„Ø§ÙˆØªÙƒ</h4>
        <div class="social-row" style="display: flex; justify-content: center; gap: 12px;">
            <a href="https://facebook.com" class="s-box facebook" target="_blank"><i class="fab fa-facebook-f"></i></a>
            <a href="https://youtube.com" class="s-box youtube" target="_blank"><i class="fab fa-youtube"></i></a>
        </div>
    </div>

    <div class="form-card animate__animated animate__fadeInUp">
        <form id="talentForm">
            <div class="field">
                <label><i class="fas fa-user-circle"></i> Ø§Ø³Ù… Ø§Ù„Ù…ØªØ³Ø§Ø¨Ù‚</label>
                <input type="text" id="name" name="Name" required placeholder="Ø§Ù„Ø§Ø³Ù… Ø«Ù„Ø§Ø«ÙŠ">
            </div>
            
            <div class="field">
                <label><i class="fab fa-whatsapp"></i> ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„ØªÙˆØ§ØµÙ„</label>
                <input type="tel" id="phone" required>
            </div>

            <div class="field">
                <label><i class="fas fa-quran"></i> Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©</label>
                <select id="surah" name="Surah" required onchange="fillQuranData()"><option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø©..</option></select>
            </div>
            
            <div class="upload-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
                <div class="upload-item" onclick="document.getElementById('imgIn').click()" style="border:1px dashed var(--gold); padding:10px; border-radius:10px; cursor:pointer;">
                    <i class="fas fa-camera"></i><br><span>Ø§Ù„ØµÙˆØ±Ø©</span>
                    <input type="file" id="imgIn" accept="image/*" style="display:none" required onchange="previewImage(this)">
                </div>
                <div class="upload-item" onclick="document.getElementById('fileIn').click()" style="border:1px dashed var(--gold); padding:10px; border-radius:10px; cursor:pointer;">
                    <i class="fas fa-microphone"></i><br><span>Ø§Ù„ØªØ³Ø¬ÙŠÙ„</span>
                    <input type="file" id="fileIn" accept="audio/*" style="display:none" required onchange="previewAudio(this)">
                </div>
            </div>
            <br>
            <button type="submit" id="btn" class="main-btn">ğŸš€ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ø§ÙˆØ© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</button>
        </form>
    </div>

    <div class="footer-credit">
        <div class="quran-final-verse">Ø£ÙÙ„ÙØ§ Ø¨ÙØ°ÙÙƒÙ’Ø±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ØªÙØ·Ù’Ù…ÙØ¦ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙ„ÙÙˆØ¨Ù</div>
        <span style="color:var(--gold); display:block; margin-top:10px;">Ø®Ø§Ø¯Ù… Ø§Ù„Ù‚Ø±Ø¢Ù† / Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù† Ù…ÙƒÙŠ - Ù†Ø¬Ø¹ Ø¹Ù„ÙˆØ§Ù†</span>
        <div style="font-size: 2rem; margin-top:10px;">ğŸ® ğŸŒ™ ğŸ®</div>
    </div>
</div>

<a href="tel:01122783768" class="fixed-call-btn">
    <i class="fas fa-phone"></i>
    <span>Ø¯Ø¹Ù… ÙÙ†ÙŠ - Ù†Ø¬Ø¹ Ø¹Ù„ÙˆØ§Ù†</span>
</a>

<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
<script>
    // --- 1. Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ ÙˆØ§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ© ---
    const historicalEvents = {
        "1/1": "Ø±Ø£Ø³ Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù‡Ø¬Ø±ÙŠØ© - Ù‡Ø¬Ø±Ø© Ø§Ù„Ù†Ø¨ÙŠ ï·º",
        "10/1": "Ù†Ø¬Ø§Ø© Ø³ÙŠØ¯Ù†Ø§ Ù…ÙˆØ³Ù‰ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù… ÙˆØµÙŠØ§Ù… Ø¹Ø§Ø´ÙˆØ±Ø§Ø¡",
        "17/9": "ØºØ²ÙˆØ© Ø¨Ø¯Ø± Ø§Ù„ÙƒØ¨Ø±Ù‰ - ÙŠÙˆÙ… Ø§Ù„ÙØ±Ù‚Ø§Ù†",
        "19/9": "ÙØªØ­ Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©",
        "10/10": "ØºØ²ÙˆØ© Ø­Ù†ÙŠÙ†",
        "19/8": "Ø´Ø¹Ø¨Ø§Ù†: ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù‚Ø¨Ù„Ø© Ù…Ù† Ø¨ÙŠØª Ø§Ù„Ù…Ù‚Ø¯Ø³ Ø¥Ù„Ù‰ Ø§Ù„ÙƒØ¹Ø¨Ø©",
        "20/8": "Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ù„Ø±Ù…Ø¶Ø§Ù† ÙÙŠ Ù†Ø¬Ø¹ Ø¹Ù„ÙˆØ§Ù†",
        "default": "ÙŠÙˆÙ… Ù…Ø¨Ø§Ø±Ùƒ Ù…Ù† ØªØ§Ø±ÙŠØ® Ø£Ù…ØªÙ†Ø§ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©"
    };

    // --- 2. Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø´Ø±Ø§Ù‚Ø§Øª ÙˆØ§Ù„Ù‡Ø¯ÙŠ Ø§Ù„Ù†Ø¨ÙˆÙŠ (100 Ø¹Ù†ØµØ±) ---
    const quranLight = Array(50).fill("Ø¥Ø´Ø±Ø§Ù‚Ø© Ù‚Ø±Ø¢Ù†ÙŠØ©: {ÙˆÙØ§ØµÙ’Ø¨ÙØ±Ù’ Ù„ÙØ­ÙÙƒÙ’Ù…Ù Ø±ÙØ¨ÙÙ‘ÙƒÙ ÙÙØ¥ÙÙ†ÙÙ‘ÙƒÙ Ø¨ÙØ£ÙØ¹Ù’ÙŠÙÙ†ÙÙ†ÙØ§}.. Ø§Ù„Ù„Ù‡ Ù„Ø§ ÙŠØªØ±ÙƒÙƒ Ø£Ø¨Ø¯Ø§Ù‹.");
    const prophetHady = Array(50).fill("Ù…Ù† Ù‡Ø¯ÙŠ Ø§Ù„Ù†Ø¨ÙˆØ©: 'Ø¨Ø´Ø±ÙˆØ§ ÙˆÙ„Ø§ ØªÙ†ÙØ±ÙˆØ§'.. Ø§Ù„Ø¥Ø³Ù„Ø§Ù… Ø¯ÙŠÙ† ÙŠØ³Ø± ÙˆØ¬Ù…Ø§Ù„.");
    const adaiya = ["Ø§Ù„Ù„Ù‡Ù… Ø¨Ù„ØºÙ†Ø§ Ø±Ù…Ø¶Ø§Ù† ÙˆØ¨Ø§Ø±Ùƒ Ù„Ù†Ø§ ÙÙŠÙ‡", "ÙŠØ§ Ø­ÙŠ ÙŠØ§ Ù‚ÙŠÙˆÙ… Ø¨Ø±Ø­Ù…ØªÙƒ Ø£Ø³ØªØºÙŠØ«", "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø±Ø¨ÙŠØ¹ Ù‚Ù„ÙˆØ¨Ù†Ø§"];
    const allTips = [...quranLight, ...prophetHady, ...adaiya];

    // --- 3. ØªØ­Ø±ÙŠÙƒ Ø§Ù„ÙØ§Ù†ÙˆØ³ ÙˆØ§Ù„Ø¹Ù†Ø§ØµØ± ---
    const lantern = document.getElementById('ramadan-lantern');
    
    // Ø¹Ù†Ø¯ Ù‡Ø² Ø§Ù„Ù‡Ø§ØªÙ (Device Motion)
    if (window.DeviceMotionEvent) {
        window.addEventListener('devicemotion', (event) => {
            let acc = event.accelerationIncludingGravity;
            lantern.style.transform = `rotate(${acc.x * 2}deg) translate(${acc.y}px, ${acc.x}px)`;
        });
    }

    // Ø¬Ø¹Ù„ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø³Ø­Ø¨ Ø¨Ø§Ù„Ù„Ù…Ø³
    function makeDraggable(el) {
        let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
        el.onmousedown = dragMouseDown;
        el.ontouchstart = dragMouseDown;

        function dragMouseDown(e) {
            e = e || window.event;
            pos3 = e.clientX || e.touches[0].clientX;
            pos4 = e.clientY || e.touches[0].clientY;
            document.onmouseup = closeDragElement;
            document.ontouchend = closeDragElement;
            document.onmousemove = elementDrag;
            document.ontouchmove = elementDrag;
        }

        function elementDrag(e) {
            e = e || window.event;
            let clientX = e.clientX || e.touches[0].clientX;
            let clientY = e.clientY || e.touches[0].clientY;
            pos1 = pos3 - clientX;
            pos2 = pos4 - clientY;
            pos3 = clientX;
            pos4 = clientY;
            el.style.top = (el.offsetTop - pos2) + "px";
            el.style.left = (el.offsetLeft - pos1) + "px";
        }

        function closeDragElement() {
            document.onmouseup = null;
            document.onmousemove = null;
            document.ontouchend = null;
            document.ontouchmove = null;
        }
    }
    makeDraggable(lantern);
    makeDraggable(document.getElementById('draggableSocial'));

    // --- 4. Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ø±Ù…Ø¶Ø§Ù† ---
    function updateCountdown() {
        const ramadanDate = new Date("February 18, 2026 00:00:00").getTime();
        const endRamadan = new Date("March 20, 2026 00:00:00").getTime();
        const now = new Date().getTime();
        
        let target = ramadanDate;
        let label = "Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø¨Ø¯Ø§ÙŠØ© Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù†";
        
        if (now > ramadanDate) {
            target = endRamadan;
            label = "Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø®ØªØ§Ù… Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ";
        }

        const diff = target - now;
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));

        document.getElementById('countdown-label').innerText = label;
        document.getElementById('countdown-timer').innerText = `${days} ÙŠÙˆÙ… : ${hours} Ø³Ø§Ø¹Ø© : ${mins} Ø¯Ù‚ÙŠÙ‚Ø©`;
    }
    setInterval(updateCountdown, 1000);

    // --- 5. ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ ---
    function initLiveInfo() {
        const updateClock = () => {
            const now = new Date();
            document.getElementById('liveTime').innerText = now.toLocaleTimeString('ar-EG');
            
            const hijriFull = new Intl.DateTimeFormat('ar-SA-u-ca-islamic-umalqura-nu-latn', {day:'numeric', month:'long', year:'numeric'}).format(now);
            const miladi = now.toLocaleDateString('ar-EG', {day:'numeric', month:'long'});
            document.getElementById('combinedDate').innerHTML = hijriFull + "<br>" + miladi + " 2026 Ù…";

            const parts = new Intl.DateTimeFormat('en-u-ca-islamic-umalqura-nu-latn', {day:'numeric', month:'numeric'}).formatToParts(now);
            const hDay = parts.find(p => p.type === 'day').value;
            const hMonth = parts.find(p => p.type === 'month').value;
            const hKey = `${hDay}/${hMonth}`;

            document.getElementById('hijriEvent').innerText = historicalEvents[hKey] || historicalEvents["default"];
        };
        updateClock(); setInterval(updateClock, 1000);
    }
    initLiveInfo();

    // --- 6. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙˆØ±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ---
    const quranMap = [ ["Ø§Ù„ÙØ§ØªØ­Ø©",7,1],["Ø§Ù„Ø¨Ù‚Ø±Ø©",286,2],["ÙŠØ³",83,440],["Ø§Ù„Ù…Ù„Ùƒ",30,562],["Ø§Ù„Ø±Ø­Ù…Ù†",78,531] ]; // Ø¹ÙŠÙ†Ø©
    const surahSelect = document.getElementById('surah');
    quranMap.forEach(s => { surahSelect.add(new Option(s[0], s[0])); });

    document.getElementById('talentForm').onsubmit = async function(e) {
        e.preventDefault();
        const overlay = document.getElementById('loadingOverlay');
        const progText = document.getElementById('progressText');
        overlay.style.display = 'flex';

        // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø±Ø§Ù‚Ø§Øª Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        let tipIdx = 0;
        const tipInt = setInterval(() => {
            document.getElementById('quizQ').innerText = "ğŸ’¡ Ù†ÙØ­Ø© Ø¥ÙŠÙ…Ø§Ù†ÙŠØ©";
            document.getElementById('quizA').innerText = allTips[Math.floor(Math.random()*allTips.length)];
        }, 3000);

        let p = 0;
        const pInt = setInterval(() => {
            if(p < 99) { p++; progText.innerText = p + "%"; }
        }, 100);

        // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø±ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­ (Ù†Ø¸Ø±Ø§Ù‹ Ù„Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø±Ø§Ø¨Ø· Script Ø­Ù‚ÙŠÙ‚ÙŠ Ø´ØºØ§Ù„ Ø§Ù„Ø¢Ù†)
        setTimeout(() => {
            clearInterval(pInt); clearInterval(tipInt);
            alert("âœ… Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…! ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… ØªÙ„Ø§ÙˆØªÙƒ Ø¨Ù†Ø¬Ø§Ø­ Ù…Ù† Ù†Ø¬Ø¹ Ø¹Ù„ÙˆØ§Ù†.");
            location.reload();
        }, 5000);
    };

    // --- 7. Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© ---
    const canvas = document.getElementById('interactive-bg');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    let particles = [];
    function initParticles() {
        for(let i=0; i<50; i++) {
            particles.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*2, d: Math.random()*1});
        }
    }
    function drawParticles() {
        ctx.clearRect(0,0,canvas.width, canvas.height);
        ctx.fillStyle = "#ffcc33";
        particles.forEach(p => {
            ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
            p.y += p.d; if(p.y > canvas.height) p.y = 0;
        });
        requestAnimationFrame(drawParticles);
    }
    initParticles(); drawParticles();
</script>
</body>
</html>
