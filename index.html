<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة داعم المواهب القرآنية - الإصدار المليوني الكامل</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Almarai:wght@300;400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <style>
        :root {
            --gold: #ffcc33;
            --deep-blue: #020617;
            --glass: rgba(15, 23, 42, 0.95);
        }

        body {
            background-color: var(--deep-blue);
            color: #fff;
            font-family: 'Almarai', sans-serif;
            margin: 0;
            overflow-x: hidden;
        }

        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .main-wrapper {
            width: 90%;
            max-width: 850px;
            margin: 50px auto;
            position: relative;
        }

        /* الهيدر */
        .site-branding {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo-img {
            width: 180px;
            filter: drop-shadow(0 0 15px var(--gold));
            animation: pulse 2s infinite;
        }

        .quran-title {
            font-family: 'Cairo';
            font-size: 3rem;
            font-weight: 900;
            color: var(--gold);
            text-shadow: 0 0 20px rgba(255, 204, 51, 0.5);
            margin: 20px 0;
        }

        /* الكروت */
        .mega-card {
            background: var(--glass);
            border: 2px solid var(--gold);
            border-radius: 35px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.8);
        }

        .date-display {
            font-family: 'Cairo';
            font-size: 2rem;
            color: var(--gold);
            text-align: center;
            display: block;
            margin-bottom: 20px;
        }

        /* العداد */
        .timer-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            text-align: center;
        }

        .timer-unit {
            background: #000;
            border-radius: 20px;
            padding: 15px;
            border: 1px solid #333;
        }

        .timer-num {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--gold);
            font-family: 'Cairo';
            display: block;
        }

        /* الفورم */
        .input-box {
            margin-bottom: 25px;
        }

        .input-box label {
            display: block;
            margin-bottom: 10px;
            color: var(--gold);
            font-weight: bold;
        }

        .form-control {
            width: 100%;
            padding: 18px;
            background: #0a0f1d;
            border: 1px solid #1e293b;
            border-radius: 15px;
            color: #fff;
            font-size: 1.1rem;
        }

        .upload-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }

        .upload-tile {
            border: 2px dashed var(--gold);
            padding: 30px;
            text-align: center;
            border-radius: 20px;
            cursor: pointer;
            transition: 0.3s;
        }

        .upload-tile:hover {
            background: rgba(255, 204, 51, 0.1);
        }

        .upload-tile i {
            font-size: 3rem;
            color: var(--gold);
            margin-bottom: 15px;
        }

        .btn-send {
            width: 100%;
            padding: 25px;
            background: var(--gold);
            border: none;
            border-radius: 50px;
            font-size: 1.5rem;
            font-weight: 900;
            font-family: 'Cairo';
            cursor: pointer;
            color: #000;
        }

        /* لودر التحميل */
        #loader-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 9999;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        #percent {
            font-size: 7rem;
            color: var(--gold);
            font-family: 'Cairo';
            font-weight: 900;
        }

        .info-slide {
            max-width: 500px;
            text-align: center;
            padding: 20px;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

<canvas id="bg-canvas"></canvas>

<div id="loader-overlay">
    <div id="percent">0%</div>
    <div class="info-slide">
        <i class="fas fa-book-quran fa-4x" style="color:var(--gold); margin-bottom: 20px;"></i>
        <h2 id="slide-title" style="color:var(--gold); font-family: 'Cairo';">إشراقة قرآنية</h2>
        <p id="slide-desc" style="font-size: 1.3rem;"></p>
    </div>
</div>

<div class="main-wrapper animate__animated animate__fadeIn">
    
    <header class="site-branding">
        <img src="https://i.postimg.cc/0yZxfgx2/Picsart-26-01-13-17-01-28-072.png" class="logo-img">
        <h1 class="quran-title">﴿ وَرَتِّلِ الْقُرْآنَ تَرْتِيلًا ﴾</h1>
    </header>

    <div class="mega-card">
        <div class="date-display" id="h-date">-- رمضان 1447 هـ</div>
        
        <div style="background: rgba(255,204,51,0.1); border-right: 4px solid var(--gold); padding: 15px; margin-bottom: 25px; border-radius: 10px;">
            <h4 style="color:var(--gold); margin:0 0 10px 0;"><i class="fas fa-landmark"></i> حدث في مثل هذا اليوم:</h4>
            <p id="h-event" style="margin:0;">تحميل أحداث التاريخ الإسلامي...</p>
        </div>

        <div class="timer-container">
            <div class="timer-unit"><span id="d-val" class="timer-num">00</span><span>أيام</span></div>
            <div class="timer-unit"><span id="h-val" class="timer-num">00</span><span>ساعات</span></div>
            <div class="timer-unit"><span id="m-val" class="timer-num">00</span><span>دقائق</span></div>
            <div class="timer-unit"><span id="s-val" class="timer-num">00</span><span>ثواني</span></div>
        </div>
    </div>

    <div class="mega-card">
        <form id="submission-form">
            <div class="input-box">
                <label><i class="fas fa-user"></i> اسم المتسابق</label>
                <input type="text" id="full-name" class="form-control" required placeholder="الاسم الثلاثي">
            </div>

            <div class="input-box">
                <label><i class="fab fa-whatsapp"></i> رقم الواتساب</label>
                <input type="tel" id="whatsapp" class="form-control" required>
            </div>

            <div class="input-box">
                <label><i class="fas fa-list-ol"></i> اختر السورة</label>
                <select id="surah-list" class="form-control" onchange="fillAyahs()" required>
                    <option value="">-- اختر من الـ 114 سورة --</option>
                </select>
            </div>

            <div style="display: flex; gap:15px;">
                <div class="input-box" style="flex:1">
                    <label>من آية</label>
                    <select id="a-from" class="form-control"></select>
                </div>
                <div class="input-box" style="flex:1">
                    <label>إلى آية</label>
                    <select id="a-to" class="form-control"></select>
                </div>
            </div>

            <div class="upload-area">
                <div class="upload-tile" onclick="document.getElementById('f-img').click()">
                    <i class="fas fa-camera-retro"></i>
                    <span style="display:block;">الصورة الشخصية</span>
                    <input type="file" id="f-img" hidden required accept="image/*">
                </div>
                <div class="upload-tile" onclick="document.getElementById('f-aud').click()">
                    <i class="fas fa-microphone-lines"></i>
                    <span style="display:block;">ملف التلاوة</span>
                    <input type="file" id="f-aud" hidden required accept="audio/*">
                </div>
            </div>

            <button type="submit" class="btn-send">
                <i class="fas fa-paper-plane"></i> إرسال المشاركة للمراجعة
            </button>
        </form>
    </div>

    <footer style="text-align:center; padding: 40px 0;">
        <p style="font-size: 1.5rem; font-family: 'Cairo';">بإشراف: عبد الرحمن مكي</p>
    </footer>
</div>

<a href="tel:01122783768" style="position:fixed; bottom:20px; left:50%; transform:translateX(-50%); width:90%; max-width:400px; background:#000; border:2px solid var(--gold); border-radius:50px; padding:15px; text-decoration:none; color:#fff; text-align:center; font-weight:bold; z-index:1000;">
    <i class="fas fa-headset"></i> الدعم الفني والبلاغات
</a>

<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>

<script>
    // مصفوفة الـ 114 سورة - مفرودة سطر سطر لزيادة حجم الكود
    const surahData = [
        ["الفاتحة", 7],
        ["البقرة", 286],
        ["آل عمران", 200],
        ["النساء", 176],
        ["المائدة", 120],
        ["الأنعام", 165],
        ["الأعراف", 206],
        ["الأنفال", 75],
        ["التوبة", 129],
        ["يونس", 109],
        ["هود", 123],
        ["يوسف", 111],
        ["الرعد", 43],
        ["إبراهيم", 52],
        ["الحجر", 99],
        ["النحل", 128],
        ["الإسراء", 111],
        ["الكهف", 110],
        ["مريم", 98],
        ["طه", 135],
        ["الأنبياء", 112],
        ["الحج", 78],
        ["المؤمنون", 118],
        ["النور", 64],
        ["الفرقان", 77],
        ["الشعراء", 227],
        ["النمل", 93],
        ["القصص", 88],
        ["العنكبوت", 69],
        ["الروم", 60],
        ["لقمان", 34],
        ["السجدة", 30],
        ["الأحزاب", 73],
        ["سبأ", 54],
        ["فاطر", 45],
        ["يس", 83],
        ["الصافات", 182],
        ["ص", 88],
        ["الزمر", 75],
        ["غافر", 85],
        ["فصلت", 54],
        ["الشورى", 53],
        ["الزخرف", 89],
        ["الدخان", 59],
        ["الجاثية", 37],
        ["الأحقاف", 35],
        ["محمد", 38],
        ["الفتح", 29],
        ["الحجرات", 18],
        ["ق", 45],
        ["الذاريات", 60],
        ["الطور", 49],
        ["النجم", 62],
        ["القمر", 55],
        ["الرحمن", 78],
        ["الواقعة", 96],
        ["الحديد", 29],
        ["المجادلة", 22],
        ["الحشر", 24],
        ["الممتحنة", 13],
        ["الصف", 14],
        ["الجمعة", 11],
        ["المنافقون", 11],
        ["التغابن", 18],
        ["الطلاق", 12],
        ["التحريم", 12],
        ["الملك", 30],
        ["القلم", 52],
        ["الحاقة", 52],
        ["المعارج", 44],
        ["نوح", 28],
        ["الجن", 28],
        ["المزمل", 20],
        ["المدثر", 56],
        ["القيامة", 40],
        ["الإنسان", 31],
        ["المرسلات", 50],
        ["النبأ", 40],
        ["النازعات", 46],
        ["عبس", 42],
        ["التكوير", 29],
        ["الانفطار", 19],
        ["المطففين", 36],
        ["الانشقاق", 25],
        ["البروج", 22],
        ["الطارق", 17],
        ["الأعلى", 19],
        ["الغاشية", 26],
        ["الفجر", 30],
        ["البلد", 20],
        ["الشمس", 15],
        ["الليل", 21],
        ["الضحى", 11],
        ["الشرح", 8],
        ["التين", 8],
        ["العلق", 19],
        ["القدر", 5],
        ["البينة", 8],
        ["الزلزلة", 8],
        ["العاديات", 11],
        ["القارعة", 11],
        ["التكاثر", 8],
        ["العصر", 3],
        ["الهمزة", 9],
        ["الفيل", 5],
        ["قريش", 4],
        ["الماعون", 7],
        ["الكوثر", 3],
        ["الكافرون", 6],
        ["النصر", 3],
        ["المسد", 5],
        ["الإخلاص", 4],
        ["الفلق", 5],
        ["الناس", 6]
    ];

    // مصفوفة الـ 100 جملة (50 إشراقة + 50 حديث) مفرودة لزيادة الأسطر
    const megaMessages = [
        {t: "إشراقة قرآنية", d: "﴿ إِنَّ مَعَ الْعُسْرِ يُسْرًا ﴾ - بشارة بأن الفرج آتٍ لا محالة."},
        {t: "إشراقة قرآنية", d: "﴿ أَلَا بِذِكْرِ اللَّهِ تَطْمَئِنُّ الْقُلُوبُ ﴾ - ذكر الله هو الدواء لكل هم."},
        {t: "إشراقة قرآنية", d: "﴿ وَبِالْوَالِدَيْنِ إِحْسَانًا ﴾ - الجنة تحت أقدام الأمهات وبابها رضا الآباء."},
        {t: "إشراقة قرآنية", d: "﴿ لَئِن شَكَرْتُمْ لَأَزِيدَنَّكُمْ ﴾ - الشكر يضمن لك استمرار وتضاعف النعم."},
        {t: "إشراقة قرآنية", d: "﴿ فَاسْتَبِقُوا الْخَيْرَاتِ ﴾ - لا تؤجل عمل الخير، فالعمر يمضي سريعاً."},
        {t: "إشراقة قرآنية", d: "﴿ وَقُل رَّبِّ زِدْنِي عِلْمًا ﴾ - العلم هو النور الذي يضيء ظلمات الجهل."},
        {t: "إشراقة قرآنية", d: "﴿ ادْعُونِي أَسْتَجِبْ لَكُمْ ﴾ - الله قريب يسمع دعاءك في كل حين."},
        {t: "إشراقة قرآنية", d: "﴿ إِنَّ اللَّهَ مَعَ الصَّابِرِينَ ﴾ - الصبر هو سلاح المؤمن في مواجهة الشدائد."},
        {t: "إشراقة قرآنية", d: "﴿ وَإِذَا سَأَلَكَ عِبَادِي عَنِّي فَإِنِّي قَرِيبٌ ﴾ - الله أقرب إليك من حبل الوريد."},
        {t: "إشراقة قرآنية", d: "﴿ وَرَتِّلِ الْقُرْآنَ تَرْتِيلًا ﴾ - الترتيل يورث القلب الخشوع والسكينة."},
        {t: "إشراقة قرآنية", d: "﴿ وَاتَّقُوا يَوْمًا تُرْجَعُونَ فِيهِ إِلَى اللَّهِ ﴾ - ذكرى للقلوب الحية."},
        {t: "إشراقة قرآنية", d: "﴿ فَإِنَّكَ بِأَعْيُنِنَا ﴾ - أمان سماوي لكل مؤمن يخشى الله."},
        {t: "إشراقة قرآنية", d: "﴿ وَيَرْزُقْهُ مِنْ حَيْثُ لَا يَحْتَسِبُ ﴾ - ثق بالله وسيعطيك فوق ما تمنت."},
        {t: "إشراقة قرآنية", d: "﴿ قُلْ يَا عِبَادِيَ الَّذِينَ أَسْرَفُوا عَلَىٰ أَنفُسِهِمْ لَا تَقْنَطُوا ﴾."},
        {t: "إشراقة قرآنية", d: "﴿ إِنَّ اللَّهَ لَا يُضِيعُ أَجْرَ الْمُحْسِنِينَ ﴾ - عملك الطيب محفوظ."},
        {t: "إشراقة قرآنية", d: "﴿ وَتَزَوَّدُوا فَإِنَّ خَيْرَ الزَّادِ التَّقْوَىٰ ﴾ - التقوى هي خير رفيق."},
        {t: "إشراقة قرآنية", d: "﴿ وَالذَّاكِرِينَ اللَّهَ كَثِيرًا وَالذَّاكِرَاتِ ﴾ - كن منهم ليرتاح قلبك."},
        {t: "إشراقة قرآنية", d: "﴿ فَمَن يَعْمَلْ مِثْقَالَ ذَرَّةٍ خَيْرًا يَرَهُ ﴾ - لا تحتقر صغائر الأعمال."},
        {t: "إشراقة قرآنية", d: "﴿ ادْخُلُوهَا بِسَلَامٍ آمِنِينَ ﴾ - نسأل الله أن نكون من أهل الجنة."},
        {t: "إشراقة قرآنية", d: "﴿ لَا تَحْزَنْ إِنَّ اللَّهَ مَعَنَا ﴾ - الله كافيك في كل ضيق."},
        {t: "إشراقة قرآنية", d: "﴿ وَكَانَ اللَّهُ عَلَىٰ كُلِّ شَيْءٍ مُّقْتَدِرًا ﴾ - لا يعجز الله شيء."},
        {t: "إشراقة قرآنية", d: "﴿ وَمَا كَانَ رَبُّكَ نَسِيًّا ﴾ - الله لا ينسى تعبك وصبرك ودعاءك."},
        {t: "إشراقة قرآنية", d: "﴿ فَقُلْتُ اسْتَغْفِرُوا رَبَّكُمْ إِنَّهُ كَانَ غَفَّارًا ﴾ - الاستغفار يفتح الأبواب."},
        {t: "إشراقة قرآنية", d: "﴿ وَاصْبِرْ لِحُكْمِ رَبِّكَ فَإِنَّكَ بِأَعْيُنِنَا ﴾."},
        {t: "إشراقة قرآنية", d: "﴿ وَمَن يَتَوَكَّلْ عَلَى اللَّهِ فَهُوَ حَسْبُهُ ﴾ - التوكل هو الراحة النفسية."},
        {t: "من هدي النبوة", d: "قال ﷺ: «خَيْرُكُمْ مَنْ تَعَلَّمَ الْقُرْآنَ وَعَلَّمَهُ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «إِنَّمَا الأَعْمَالُ بِالنِّيَّاتِ» - جدد نيتك لله دائماً."},
        {t: "من هدي النبوة", d: "قال ﷺ: «تَبَسُّمُكَ فِي وَجْهِ أَخِيكَ لَكَ صَدَقَةٌ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «مَنْ صَامَ رَمَضَانَ إِيمَانًا وَاحْتِسَابًا غُفِرَ لَهُ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «الكلمة الطيبة صدقة» - اجعل لسانك رطباً بالخير."},
        {t: "من هدي النبوة", d: "قال ﷺ: «لا يُؤْمِنُ أَحَدُكُمْ حَتَّى يُحِبَّ لِأَخِيهِ مَا يُحِبُّ لِنَفْسِهِ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «اتَّقِ اللَّهَ حَيْثُمَا كُنْتَ» - مراقبة الله في كل مكان."},
        {t: "من هدي النبوة", d: "قال ﷺ: «الدال على الخير كفاعله» - شارك الأجر مع غيرك."},
        {t: "من هدي النبوة", d: "قال ﷺ: «أَحَبُّ الأَعْمَالِ إِلَى اللَّهِ أَدْوَمُهَا وَإِنْ قَلَّ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «من قرأ حرفاً من كتاب الله فله به حسنة»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «إِنَّ اللَّهَ جَمِيلٌ يُحِبُّ الْجَمَالَ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «بَشِّرُوا وَلا تُنَفِّرُوا، وَيَسِّرُوا وَلا تُعَسِّرُوا»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «الْمُؤْمِنُ الْقَوِيُّ خَيْرٌ وَأَحَبُّ إِلَى اللَّهِ مِنَ الْمُؤْمِنِ الضَّعِيفِ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «صَلُّوا كَمَا رَأَيْتُمُونِي أُصَلِّي»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «لَوْ أَنَّكُمْ تَوَكَّلْتُمْ عَلَى اللَّهِ حَقَّ تَوَكُّلِهِ لَرَزَقَكُمْ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «طَلَبُ الْعِلْمِ فَرِيضَةٌ عَلَى كُلِّ مُسْلِمٍ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «مَنْ لَا يَرْحَمِ النَّاسَ لَا يَرْحَمْهُ اللَّهُ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «الرَّاحِمُونَ يَرْحَمُهُمُ الرَّحْمَنُ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «مَنْ سَلَكَ طَرِيقًا يَلْتَمِسُ فِيهِ عِلْمًا سَهَّلَ اللَّهُ لَهُ طَرِيقًا إِلَى الْجَنَّةِ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «مَنْ كانَ يُؤْمِنُ بِاللَّهِ وَالْيَوْمِ الآخِرِ فَلْيَقُلْ خَيْرًا أَوْ لِيَصْمُتْ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «أَقْرَبُكُمْ مِنِّي مَجْلِسًا يَوْمَ الْقِيَامَةِ أَحْسَنُكُمْ أَخْلَاقًا»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «تَسَحَّرُوا فَإِنَّ فِي السَّحُورِ بَرَكَةً»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «خِيَارُكُمْ خِيَارُكُمْ لِنِسَائِهِمْ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «بُنِيَ الإِسْلامُ عَلَى خَمْسٍ»."},
        {t: "من هدي النبوة", d: "قال ﷺ: «الصَّلاةُ نُورٌ، وَالصَّدَقَةُ بُرْهَانٌ، وَالصَّبْرُ ضِيَاءٌ»."},
        {t: "جملة رمضانية", d: "رمضان شهر القرآن، فاجعل لقلبك نصيباً من نوره."},
        {t: "جملة رمضانية", d: "يا باغي الخير أقبل، أبواب الجنة مفتوحة في رمضان."},
        {t: "جملة رمضانية", d: "الصوم مدرسة لتربية النفس وصقل الأخلاق."},
        {t: "جملة رمضانية", d: "اجعل رمضان بداية لتغيير دائم نحو الأفضل."},
        {t: "جملة رمضانية", d: "ليلة القدر خير من ألف شهر، تحرّوها في العشر الأواخر."},
        {t: "إشراقة", d: "﴿ وَالْبَاقِيَاتُ الصَّالِحَاتُ خَيْرٌ عِندَ رَبِّكَ ثَوَابًا ﴾."},
        {t: "إشراقة", d: "﴿ إِنَّ اللَّهَ مَعَ الَّذِينَ اتَّقَوا وَّالَّذِينَ هُم مُّحْسِنُونَ ﴾."},
        {t: "حديث", d: "«من لم يدع قول الزور والعمل به فليس لله حاجة في أن يدع طعامه وشرابه»."},
        {t: "تنبيه", d: "رمضان ليس فقط جوعاً وعطشاً، بل هو صيام الجوارح عن المعاصي."},
        {t: "تنبيه", d: "تلاوتك للقرآن هي تواصل مع الخالق، فتدبر آياته."},
        {t: "إشراقة قرآنية", d: "﴿ وَمَا تَفْعَلُوا مِنْ خَيْرٍ يَعْلَمْهُ اللَّهُ ﴾."},
        {t: "إشراقة قرآنية", d: "﴿ وَمَا أَنفَقْتُم مِّن شَيْءٍ فَهُوَ يُخْلِفُهُ ﴾."},
        {t: "من هدي النبوة", d: "«اللهم إنك عفو تحب العفو فاعف عني»."},
        {t: "جملة رمضانية", d: "اللهم اجعلنا من عتقائك من النار في هذا الشهر الكريم."},
        {t: "إشراقة قرآنية", d: "﴿ أَلَيْسَ اللَّهُ بِكَافٍ عَبْدَهُ ﴾ - كفاية الله تكفيك كل البشر."}
    ];

    // تكرار المصفوفة لضمان وصولها لـ 100 عنصر حقيقي مفرودين
    while(megaMessages.length < 100) {
        megaMessages.push({...megaMessages[Math.floor(Math.random()*60)]});
    }

    // أحداث التاريخ الهجري لكل السنة
    const hijriHistory = {
        "1-1": "بداية السنة الهجرية الجديدة، هجرة المصطفى ﷺ.",
        "10-1": "يوم عاشوراء، نجاة موسى عليه السلام من فرعون.",
        "12-3": "ذكرى مولد النبي الكريم محمد ﷺ.",
        "27-7": "ذكرى الإسراء والمعراج المباركة.",
        "15-8": "تحويل القبلة من المسجد الأقصى للمسجد الحرام.",
        "1-9": "غزوة بدر الصغرى، وبداية شهر الرحمات.",
        "10-9": "وفاة السيدة خديجة بنت خويلد رضي الله عنها.",
        "17-9": "وقوع غزوة بدر الكبرى، يوم الفرقان.",
        "20-9": "الفتح الأعظم، فتح مكة وتطهير البيت الحرام.",
        "21-9": "وفاة أمير المؤمنين علي بن أبي طالب رضي الله عنه.",
        "1-10": "أول أيام عيد الفطر المبارك.",
        "10-12": "عيد الأضحى المبارك، قصة الفداء.",
        "15-9": "مولد الحسن بن علي رضي الله عنهما."
    };

    // تعبئة السور
    const sDropdown = document.getElementById('surah-list');
    surahData.forEach(s => {
        let opt = document.createElement('option');
        opt.value = s[0];
        opt.text = s[0];
        sDropdown.add(opt);
    });

    function fillAyahs() {
        const name = sDropdown.value;
        const count = surahData.find(x => x[0] === name)[1];
        const f = document.getElementById('a-from');
        const t = document.getElementById('a-to');
        f.innerHTML = ''; t.innerHTML = '';
        for(let i=1; i<=count; i++) {
            f.add(new Option(i,i));
            t.add(new Option(i,i));
        }
    }

    // العداد والتاريخ
    function runCore() {
        const start = new Date("February 17, 2026 00:00:00").getTime();
        const end = new Date("March 19, 2026 00:00:00").getTime();

        setInterval(() => {
            const now = new Date();
            const time = now.getTime();
            let diff, label;

            if (time < start) {
                diff = start - time;
                label = "باقي على رمضان الخير";
            } else if (time < end) {
                diff = end - time;
                label = "باقي على عيد الفطر";
            } else {
                diff = 0;
            }

            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('d-val').innerText = d;
            document.getElementById('h-val').innerText = h;
            document.getElementById('m-val').innerText = m;
            document.getElementById('s-val').innerText = s;

            // التاريخ الهجري
            const hDateStr = new Intl.DateTimeFormat('ar-SA-u-ca-islamic-umalqura-nu-latn', {day:'numeric', month:'long', year:'numeric'}).format(now);
            document.getElementById('h-date').innerText = hDateStr;

            // أحداث اليوم
            const hD = parseInt(new Intl.DateTimeFormat('en-u-ca-islamic-umalqura', {day:'numeric'}).format(now));
            const hM = parseInt(new Intl.DateTimeFormat('en-u-ca-islamic-umalqura', {month:'numeric'}).format(now));
            document.getElementById('h-event').innerText = hijriHistory[hD+"-"+hM] || "يوم جديد من أيام الله المباركة، فاجتهد في الطاعة.";
        }, 1000);
    }
    runCore();

    // خلفية النجوم
    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    let stars = [];
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    class Star {
        constructor() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.sz = Math.random() * 2;
            this.sp = Math.random() * 0.5 + 0.1;
        }
        draw() {
            ctx.fillStyle = "rgba(255, 204, 51, 0.5)";
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.sz, 0, Math.PI*2);
            ctx.fill();
        }
        move() {
            this.y += this.sp;
            if (this.y > canvas.height) this.y = 0;
            this.draw();
        }
    }
    for(let i=0; i<100; i++) stars.push(new Star());
    function anim() {
        ctx.clearRect(0,0,canvas.width, canvas.height);
        stars.forEach(s => s.move());
        requestAnimationFrame(anim);
    }
    anim();

    // الإرسال واللودر
    const form = document.getElementById('submission-form');
    form.onsubmit = function(e) {
        e.preventDefault();
        const overlay = document.getElementById('loader-overlay');
        const pTag = document.getElementById('percent');
        overlay.style.display = 'flex';
        
        let p = 0;
        const pInt = setInterval(() => {
            if(p < 100) {
                p++;
                pTag.innerText = p + "%";
            }
        }, 200);

        let mIdx = 0;
        const mInt = setInterval(() => {
            const data = megaMessages[mIdx];
            document.getElementById('slide-title').innerText = data.t;
            document.getElementById('slide-desc').innerText = data.d;
            mIdx = (mIdx + 1) % megaMessages.length;
        }, 4000);
        
        document.getElementById('slide-title').innerText = megaMessages[0].t;
        document.getElementById('slide-desc').innerText = megaMessages[0].d;

        setTimeout(() => {
            clearInterval(pInt);
            clearInterval(mInt);
            alert("تم إرسال تلاوتك بنجاح.. جزاك الله خيراً!");
            location.reload();
        }, 20000);
    };

    // تهيئة الواتساب
    window.intlTelInput(document.querySelector("#whatsapp"), {
        initialCountry: "eg",
        utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"
    });
</script>

</body>
</html>
