<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>داعم المواهب للقران الكريم</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&family=Almarai:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css">
    
    <style>
        :root { --gold: #ffcc33; --gold-glow: rgba(255, 204, 51, 0.5); }
        body {
            font-family: 'Almarai', sans-serif;
            margin: 0; color: #fff; background: #000;
            background-image: 
                radial-gradient(circle at center, transparent 0%, #000 90%),
                url('https://www.transparenttextures.com/patterns/black-linen.png');
            background-attachment: fixed;
            min-height: 100vh; padding: 20px 0 120px 0;
        }
        
        .container { width: 92%; max-width: 500px; margin: auto; position: relative; z-index: 5; }
        .header-section { text-align: center; margin-bottom: 25px; }
        .logo-main { width: 130px; filter: drop-shadow(0 0 15px var(--gold-glow)); }
        .site-name { font-family: 'Cairo'; color: var(--gold); font-size: 1.3rem; margin-top: 10px; }
        .quran-verse { font-family: 'Cairo'; font-size: 1.8rem; margin: 15px 0; color: #fff; font-weight: 900; }

        .info-bar { background: rgba(0, 0, 0, 0.6); border: 1px solid var(--gold); border-radius: 20px; padding: 15px; margin-bottom: 25px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; text-align: center; backdrop-filter: blur(5px); }
        .info-item i { color: var(--gold); margin-bottom: 5px; font-size: 1.2rem; }
        .time-display { font-size: 1.1rem; color: var(--gold); font-weight: 900; }
        
        .motivational-box { text-align: center; background: rgba(255, 204, 51, 0.05); border-right: 4px solid var(--gold); padding: 15px; margin-bottom: 25px; border-radius: 0 15px 15px 0; }
        .form-card { background: rgba(10, 10, 10, 0.9); border: 2px solid var(--gold); padding: 25px; border-radius: 25px; text-align: center; backdrop-filter: blur(10px); }
        .field { text-align: right; margin-bottom: 15px; }
        .field label { display: block; margin-bottom: 8px; color: var(--gold); font-size: 0.9rem; }
        .field input, .field select { width: 100%; padding: 12px; background: #000; border: 1px solid #333; color: #fff; border-radius: 10px; box-sizing: border-box; }
        
        .upload-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 20px 0; }
        .upload-item { border: 1px dashed var(--gold); padding: 12px; border-radius: 12px; cursor: pointer; transition: 0.3s; }
        .main-btn { width: 100%; background: var(--gold); color: #000; padding: 16px; border: none; border-radius: 50px; font-family: 'Cairo'; font-weight: 900; font-size: 1.2rem; cursor: pointer; }

        #loadingOverlay { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.95); z-index: 9999; justify-content: center; align-items: center; 
            flex-direction: column; text-align: center; padding: 20px;
        }
        #progressText { color: var(--gold); font-size: 3rem; font-weight: 900; font-family: 'Cairo'; }
        #quizBox { border: 2px solid var(--gold); padding: 20px; border-radius: 20px; background: #111; width: 85%; max-width: 350px; margin-top: 20px; }
        #quizQ { color: var(--gold); font-size: 1.1rem; font-weight: bold; margin-bottom: 10px; }
        #quizA { color: #fff; font-size: 1rem; line-height: 1.6; min-height: 80px; transition: 0.5s; }

        .fixed-call-btn { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 420px; z-index: 1000; background: #000; border: 2px solid var(--gold); border-radius: 50px; padding: 15px; display: flex; align-items: center; justify-content: center; gap: 12px; text-decoration: none; }
        .fixed-call-btn span { color: #fff; font-family: 'Cairo'; }
    </style>
</head>
<body>

<div id="loadingOverlay">
    <div id="progressText">0%</div>
    <div id="quizBox">
        <div id="quizQ">إشراقة إيمانية..</div>
        <div id="quizA">جاري التجهيز...</div>
    </div>
</div>

<div class="container">
    <div class="header-section">
        <img src="https://i.postimg.cc/0yZxfgx2/Picsart-26-01-13-17-01-28-072.png" class="logo-main">
        <div class="site-name">داعم المواهب للقرآن الكريم</div>
        <div class="quran-verse">وَرَتِّلِ الْقُرْآنَ تَرْتِيلًا</div>
    </div>

    <div class="info-bar">
        <div class="info-item" style="border-left: 1px solid #333">
            <i class="fas fa-clock"></i>
            <span id="liveTime" class="time-display">00:00:00</span>
        </div>
        <div class="info-item">
            <i class="fas fa-users"></i>
            <span id="userCounter" style="font-weight:900;">1,240</span>
        </div>
    </div>

    <div class="form-card">
        <form id="talentForm">
            <div class="field">
                <label>الاسم بالكامل</label>
                <input type="text" id="name" required placeholder="اكتب اسمك ثلاثي">
            </div>
            <div class="field">
                <label>رقم الواتساب</label>
                <input type="tel" id="phone" required>
            </div>
            <div class="field">
                <label>اسم السورة</label>
                <select id="surah" required></select>
            </div>
            
            <div class="upload-grid">
                <div class="upload-item" onclick="document.getElementById('imgIn').click()">
                    <i class="fas fa-camera"></i><br><span id="imgT">صورتك الموقرة</span>
                    <input type="file" id="imgIn" accept="image/*" style="display:none" required onchange="uLabel(this,'imgT')">
                </div>
                <div class="upload-item" onclick="document.getElementById('fileIn').click()">
                    <i class="fas fa-microphone"></i><br><span id="fileT">تلاوتك الندية</span>
                    <input type="file" id="fileIn" accept="audio/*" style="display:none" required onchange="uLabel(this,'fileT')">
                </div>
            </div>
            
            <button type="submit" class="main-btn">انشر نور تلاوتك الآن</button>
        </form>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
<script>
    const infoData = [
        {t:"إشراقة قرآنية..", m:"سورة الفاتحة هي أعظم سورة؛ لأنها شملت مجمل مقاصد الدين من توحيد وعبادة."},
        {t:"من هدي النبوة..", m:"قال ﷺ: 'خيركم من تعلم القرآن وعلمه'؛ تشريف لمن اشتغل بأفضل الكلام."},
        {t:"إشراقة قرآنية..", m:"آية الكرسي هي أعظم آية؛ لأنها تصف جلال الله وقدرته المحيطة بكل شيء."},
        {t:"من هدي النبوة..", m:"قال ﷺ: 'إنما الأعمال بالنيات'؛ أي أن قبول العمل متوقف على صدق القصد."},
        {t:"إشراقة قرآنية..", m:"سورة الإخلاص تعدل ثلث القرآن؛ لأنها أخلصت بالكامل لتوحيد الله."},
        {t:"من هدي النبوة..", m:"قال ﷺ: 'الدين النصيحة'؛ قوام الدين وثباته في صدق التوجيه لله ورسوله."},
        {t:"إشراقة قرآنية..", m:"سورة الملك هي المانعة؛ لأنها تجادل عن صاحبها في القبر حتى يغفر له."},
        {t:"من هدي النبوة..", m:"قال ﷺ: 'تبسمك في وجه أخيك صدقة'؛ المعروف يشمل حتى الكلمة والوجه الطلق."},
        {t:"إشراقة قرآنية..", m:"سورة يس تسمى قلب القرآن؛ لأنها تقرر العقيدة والبعث بأسلوب مؤثر."},
        {t:"من هدي النبوة..", m:"قال ﷺ: 'اتق الله حيثما كنت'؛ التقوى هي مراقبة الله في السر والعلن."},
        {t:"إشراقة قرآنية..", m:"سورة البقرة تسمى فسطاط القرآن؛ لعظمها وكثرة الأحكام والمواعظ فيها."},
        {t:"من هدي النبوة..", m:"قال ﷺ: 'الصلاة نور'؛ تضيء قلب المؤمن في الدنيا وقبره في الآخرة."},
        {t:"إشراقة قرآنية..", m:"سورة الكهف نور بين الجمعتين؛ تمنح القارئ بصيرة وهداية طوال الأسبوع."},
        {t:"من هدي النبوة..", m:"قال ﷺ: 'المرء مع من أحب'؛ تأكيد على أهمية اختيار الرفقة الصالحة."},
        {t:"إشراقة قرآنية..", m:"سورة النحل هي سورة النعم؛ لأنها عددت نعم الله لتذكير العباد بشكرها."}
    ];

    const surahs = ["الفاتحة","البقرة","آل عمران","النساء","المائدة","الأنعام","الأعراف","الأنفال","التوبة","يونس","هود","يوسف","الرعد","إبراهيم","الحجر","النحل","الإسراء","الكهف","مريم","طه","الأنبياء","الحج","المؤمنون","النور","الفرقان","الشعراء","النمل","القصص","العنكبوت","الروم","لقمان","السجدة","الأحزاب","سبأ","فاطر","يس","الصافات","ص","الزمر","غافر","فصلت","الشورى","الزخرف","الدخان","الجاثية","الأحقاف","محمد","الفتح","الحجرات","ق","الذاريات","الطور","النجم","القمر","الرحمن","الواقعة","الحديد","المجادلة","الحشر","الممتحنة","الصف","الجمعة","المنافقون","التغابن","الطلاق","التحريم","الملك","القلم","الحاقة","المعارج","نوح","الجن","المزمل","المدثر","القيامة","الإنسان","المرسلات","النبأ","النازعات","عبس","التكوير","الانفطار","المطففين","الانشقاق","البروج","الطارق","الأعلى","الغاشية","الفجر","البلد","الشمس","الليل","الضحى","الشرح","التين","العلق","القدر","البينة","الزلزلة","العاديات","القارعة","التكاثر","العصر","الهمزة","الفيل","قريش","الماعون","الكوثر","الكافرون","النصر","المسد","الإخلاص","الفلق","الناس"];
    const sSel = document.getElementById('surah');
    surahs.forEach(s => sSel.add(new Option(s, s)));

    function uLabel(i, id) { if(i.files[0]) document.getElementById(id).innerText = "✅ تم اختيار الملف"; }

    const phoneInput = document.querySelector("#phone");
    const iti = window.intlTelInput(phoneInput, { separateDialCode: true, initialCountry: "eg" });

    setInterval(() => { document.getElementById('liveTime').innerText = new Date().toLocaleTimeString('ar-EG'); }, 1000);

    document.getElementById('talentForm').onsubmit = async function(e) {
        e.preventDefault();
        const overlay = document.getElementById('loadingOverlay');
        overlay.style.display = 'flex';
        
        let infoIdx = 0;
        const changeInfo = () => {
            const item = infoData[infoIdx];
            document.getElementById('quizQ').innerText = item.t;
            document.getElementById('quizA').innerText = item.m;
            infoIdx = (infoIdx + 1) % infoData.length;
        };
        changeInfo();
        const infoTimer = setInterval(changeInfo, 7000);

        try {
            const img = await toB64(document.getElementById('imgIn').files[0]);
            const aud = await toB64(document.getElementById('fileIn').files[0]);

            const xhr = new XMLHttpRequest();
            xhr.open("POST", "رابط_ماكرو_جوجل_الخاص_بك", true);
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

            xhr.upload.onprogress = (e) => {
                if (e.lengthComputable) {
                    document.getElementById('progressText').innerText = Math.round((e.loaded / e.total) * 100) + "%";
                }
            };

            xhr.onload = () => {
                clearInterval(infoTimer);
                alert("✅ تم الرفع بنجاح! نفع الله بك.");
                location.reload();
            };

            xhr.onerror = () => { throw new Error(); };

            const body = new URLSearchParams({
                Name: document.getElementById('name').value,
                Phone: iti.getNumber(),
                Surah: sSel.value,
                photoData: img.split(',')[1],
                audioData: aud.split(',')[1]
            });
            xhr.send(body.toString());

        } catch (err) {
            overlay.style.display = 'none';
            clearInterval(infoTimer);
            alert("تعذر الإرسال.. تأكد من قوة الإنترنت وحاول مجدداً.");
        }
    };

    const toB64 = file => new Promise((res, rej) => {
        const r = new FileReader(); r.readAsDataURL(file);
        r.onload = () => res(r.result); r.onerror = e => rej(e);
    });
</script>
</body>
</html>
